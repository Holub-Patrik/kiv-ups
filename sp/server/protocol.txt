// Header of 8 ascii bytes total
MAGICK := PKR

// Total message length can be up to 9_999
// That should be more than enough
MSG_SIZE := INT(4)

MSG_TYPES := BYTE(1) {
	A // Player Action -> Fold, Bet, Check, Even
	C // Connection -> Connect, Disconnect
	M // Message -> PlayerDC, General
	R // Response -> Evened, All In, Fold, No cash
	S // State
}

STATE := STRUCT {
	Round -> INT(2)
	Folded -> BOOLEAN ("T"/"F")
	Chips -> VAL_LEN := INT(4) + VAL := STR_INT(VAL_LEN)
}

MSG_PAYLOAD := {
	MSG_TYPE := MSG_TYPES
	MSG_TYPE(A)
		Fold -> "F"
		Bet -> "B" + LENGTH := INT(4) /*Bet Size Length*/ + BET := STR_INT(LENGTH) 
		Check -> "C"
		Even -> "E"
	MSG_TYPE(C)
		Connect -> "C" + NICK_LEN := INT(4) + NICK := STRING(NICK_LEN)
		Disconnect -> "D"
	MSG_TYPE(M)
		PlayerDC -> "D" + NICK_LEN := INT(4) + NICK := STRING(NICK_LEN)
		General -> "G" + PAYLOAD_LEN_LEN := INT(4) + PAYLOAD_LEN := STR_INT(PAYLOAD_LEN_LEN) + PAYLOAD := STRING(PAYLOAD_LEN)
	MSG_TYPE(R)
		Even: 
			Evened -> "E" /* Even the pool from the player's cash */
			All in -> "A"
			Fold -> "F"
			No cash -> "N" /* When the server asks for even after the player has done all in */
	MSG_TYPE(S)
		No State -> "N" /* The server hasn't seen the player, thus is asking for the client to send the data */
		State -> "S" + PAYLOAD_LEN_LEN := STR_INT(4) + PAYLOAD_LEN := STR_INT(PAYLOAD_LEN_LEN) + PAYLOAD(PAYLOAD_LEN)
}

